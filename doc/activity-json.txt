



Network Working Group                                           J. Arkko
Internet-Draft                                               Planetskier
Intended status: Informational                               May 9, 2020
Expires: November 10, 2020


                             Activity JSON
                      draft-arkko-activity-json-00

Abstract

   Activity JSON is a simple format that allows providing information
   about activities and their geographic positions.  It is an extension
   of existing formats, specialized to provide some additional
   information that applications can use to perform filtering, showing
   useful information to the user, and so on.  Activity JSON is
   primarily targeted towards passing information between a web server
   and an application running in a browser.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on November 10, 2020.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of



Arkko                   Expires November 10, 2020               [Page 1]

Internet-Draft                Activity JSON                     May 2020


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Normative Language  . . . . . . . . . . . . . . . . . . . . .   3
   3.  Goals . . . . . . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  Modelling Activities  . . . . . . . . . . . . . . . . . . . .   3
   5.  Generation 2 Format . . . . . . . . . . . . . . . . . . . . .   3
     5.1.  Properties  . . . . . . . . . . . . . . . . . . . . . . .   4
     5.2.  Article Objects . . . . . . . . . . . . . . . . . . . . .   5
   6.  Generation 1 Format . . . . . . . . . . . . . . . . . . . . .   6
   7.  Generation 0 Format . . . . . . . . . . . . . . . . . . . . .   7
   8.  Compatibility . . . . . . . . . . . . . . . . . . . . . . . .   7
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   8
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .   8
     9.2.  Informative References  . . . . . . . . . . . . . . . . .   8
   Appendix A.  Contributors . . . . . . . . . . . . . . . . . . . .   9
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   9

1.  Introduction

   The author has worked with web applications that deal with sports
   activities in different locations.  The applications allow displaying
   varying activities on a map, smart filtering based on specific type
   or attributes of those activities.

   Activity JSON is a simple format that allows providing information
   about activities and their geographic positions.  It is an extension
   of existing formats, specialized to provide some additional
   information that applications can use to perform filtering, showing
   useful information to the user, and so on.  Activity JSON is
   primarily targeted towards passing information between a web server
   and an application running in a browser.

   JavaScript Object Notation (JSON) [RFC7159] is a popular format used
   in web applications.  GeoJSON [RFC7946] [GeoJSON] is a format for
   encoding a variety of geographic data structures using JSON.

   Activity JSON has been used in building websites for skiing-related
   activities reported in [Planetskier] and caving-related activities
   reported in [Luolaseura] and [Planetcaver].

   The rest of this document is organized as follows.  Section 3
   discusses the goals for this work, and Section 4 covers some of the
   modelling issues.  Section 5 describes the currently specified format
   for Activity JSON.  The description includes specification of the



Arkko                   Expires November 10, 2020               [Page 2]

Internet-Draft                Activity JSON                     May 2020


   syntax rules and the structure as inherited from base specifications,
   and a detailed discussion of the specific properties that can be
   described by Activity JSON objects.

   There are, however, two older versions of Activity JSON.  Software
   libraries support all format variants, so using an older format is
   generally ok, but for new information the Generation 2 format is
   RECOMMENDED.  Note that with Generation 2 format, Activity JSON can
   be directly supplied to a wide variety of software that accepts
   GeoJSON.  The earlier format generations and compatibility discussion
   can be found in Section 6, Section 7, and Section 8.

2.  Normative Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

3.  Goals

   There are many tools and formats to manipulate, collect, store, and
   display collections of points or other geographic objects.  Formats
   for information relating to this (such as [RFC7946] or [KML]) are
   prior art and not something that needs to be replicated.

4.  Modelling Activities

   ...

5.  Generation 2 Format

   The format is a specialization of GeoJSON.  Every Activity JSON
   object is also a valid GeoJSON object, but has some extra properties
   to carry the information that is needed to describe the activities.

   For example, an empty file contains just:

             {
               "type": "FeatureCollection",
               "features": []
             }

   Here's an example of a file with just one entry:






Arkko                   Expires November 10, 2020               [Page 3]

Internet-Draft                Activity JSON                     May 2020


     {
       "type": "FeatureCollection",
       "features": [
           {
             "type":
                "Feature",
             "geometry":
                { "type": "Point",
                  "coordinates": [60.30145486, 24.62792567] },
             "properties": {
               "n": "Kattilajaerven iso lippaluola, Nuuksio, Espoo",
               "m": "https://example.com/cavemap-kattilajarvi.pdf",
               "l": 9.3,
               "la": "exact",
               "k": "Espoo",
               "c": "Finland",
               "o": "Europe",
               "rl": [{ "t": "Kattilajaervi roof caves",
                        "i": "https://example.com/a-picture.jpg"
                        "w": ["Jari"],
                        "y": 2020,
                        "m": 5,
                        "a": ["Caving"],
                        "sa": ["Rock"],
                        "u": "https://example.com/an-article.html" }
                     ]
              }
           }
       ]
     }

5.1.  Properties

   The properties described in a GeoJSON file are as follows:

   n

      The name of the place.  By convention the last item of the name
      (after last comma) should be city name.  Mandatory.

   lat, lon

      The coordinates, in WGS84 format.  Mandatory.

   alt

      An optional attribute that describes the altitude the location or
      the highest point in the destination, in memeters.



Arkko                   Expires November 10, 2020               [Page 4]

Internet-Draft                Activity JSON                     May 2020


   fz

      Set to true if the coordinates are "fuzzy" to hide the true
      location for privacy etc. reasons.  Default is false.  This
      attribute is optional.

   m

      The cave map link URL, if any.  If there's no URL, the attribute
      should not be specified at all (and should not be set to, e.g.,
      empty string, although it is recommended that software recognises
      empty strings similarly to missing attributes.

   l

      The length of the cave in meters, if known.  The attribute is
      optional, and should be left out if no value is known.

   la

      The cave length accuracy ("exact" or "approx").  The attribute is
      optional, and the default value is "approx" if no other value is
      provided.

   k

      The city/town/county.  This attribute is mandatory.

   c

      The country.  This attribute is mandatory.

   o

      The continent.  This attribute is mandatory.

   rl

      The "reading list", a list of articles describing visits etc.
      This can of course be empty, i.e., [], but the attribute itself is
      mandatory.  The description of what an article object is can be
      found from Section 5.2.

5.2.  Article Objects

   Aach article is a JSON record.  The record has the following fields:

   t



Arkko                   Expires November 10, 2020               [Page 5]

Internet-Draft                Activity JSON                     May 2020


      The title.  This attribute is mandatory.

   i

      URL for an image representing the article.  This attribute is
      optional.  If no image URL known, the attribute should not be
      specified at all.

   w

      List of people who were there.  This attribute is mandatory.

   y

      Year of visit (as a number).  This attribute is mandatory.

   m

      The month of visit (as a number, between 1-12).  This attribute is
      mandatory.

   a

      The activity: Caving, Skiing, etc.  This attribute is mandatory.

   sa

      The sub-activity, e.g., within caving the allowed sub-activities
      or cave types are Rock, Ice, Man-made, Science, and Equipment and
      within skiing they are Outdoor, Indoor, Snow, Sand, Rock, Ash,
      Asphalt, Grass, Mud, Plastic, Other-substances, and Imported-snow.
      This attribute is mandatory.

   u

      URL for the article.  This attribute is optional.  If no URL is
      known, the attribute should not be specified at all.

6.  Generation 1 Format

   The format is based on JSON.  An Activity JSON Generation 1 object
   MUST be a JSON array of records.

   For example, an empty file contains just:

             []

   Here's an example of a file with just one entry:



Arkko                   Expires November 10, 2020               [Page 6]

Internet-Draft                Activity JSON                     May 2020


         [
          {"n": "Kattilajaerven iso lippaluola, Nuuksio, Espoo",
           "lat": 60.30145486,
           "lon": 24.62792567,
           "m": "https://example.com/cavemap-kattilajarvi.pdf",
           "l": 9.3,
           "la": "exact",
           "k": "Espoo",
           "c": "Finland",
           "o": "Europe",
           "rl": [{ "t": "Kattilajaervi roof caves",
                    "i": "https://example.com/a-picture.jpg"
                    "w": ["Jari"],
                    "y": 2020,
                    "m": 5,
                    "a": ["Caving"],
                    "sa": ["Rock"],
                    "u": "https://example.com/an-article.html" }
                 ]
          }
         ]

   Where the fields are as described in Section 5.1.

7.  Generation 0 Format

   Generation 0 format is similar to Generation 1 format, with the
   following differences:

   o  The "k" (city) field was not used.

   o  The "y" (year) and "m" (month) fields were not used.

8.  Compatibility

   All the formats are very similar.  The information content is the
   same, and the attributes about the activities are represented
   literally in the same way.  The only differences are some additional
   information in Generation 2 and Generation 1 formats, and the
   wrapping of entries in the GeoJSON objects in Generation 2 format vs.
   simply containing them in a list in Generations 1 and 2 formats.

   The Psgeo software library supports both [Psgeo], so existing files
   with content in Generation 1 format continue to be readable.

   For compatibility between generation 1 and 0, the differences are
   again supported by software libraries and any Generation 0 content
   continues to be acceptable by systems consuming Activity JSON.



Arkko                   Expires November 10, 2020               [Page 7]

Internet-Draft                Activity JSON                     May 2020


9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC7159]  Bray, T., Ed., "The JavaScript Object Notation (JSON) Data
              Interchange Format", RFC 7159, DOI 10.17487/RFC7159, March
              2014, <https://www.rfc-editor.org/info/rfc7159>.

   [RFC7946]  Butler, H., Daly, M., Doyle, A., Gillies, S., Hagen, S.,
              and T. Schaub, "The GeoJSON Format", RFC 7946,
              DOI 10.17487/RFC7946, August 2016,
              <https://www.rfc-editor.org/info/rfc7946>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

9.2.  Informative References

   [GeoJSON]  GeoJSON, "GeoJSON", website https://geojson.org, May 2020.

   [KML]      Wilson, T., "OGC KML", OGC 07-147r2 version 2.2.20, April
              2008.

   [Luolaseura]
              Luolaseura, "Suomen Luolaseura",
              website https://luolaseura.fi, May 2020.

   [Planetcaver]
              Arkko, J., "The Planetcaver",
              website https://planetcaver.net, May 2020.

   [Planetskier]
              Arkko, J., "Skiing the Planet",
              website https://planetskier.net, May 2020.

   [Psgeo]    Arkko, J., "Psgeo: Activity location library",
              website https://github.com/jariarkko/psgeo, May 2020.








Arkko                   Expires November 10, 2020               [Page 8]

Internet-Draft                Activity JSON                     May 2020


Appendix A.  Contributors

   The author would like to acknowledge the contributions of Ralf
   Strandell, Jarmo Ruuth, and Dare Talvitie.  Discussions with you have
   greatly enhanced knowledge about this topic.

Author's Address

   Jari Arkko
   Planetskier
   Vaelitie 1B
   Kauniainen  02700
   Finland

   Email: jari@arkko.com




































Arkko                   Expires November 10, 2020               [Page 9]
